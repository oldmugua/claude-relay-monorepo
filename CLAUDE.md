# CLAUDE.md

æ­¤æ–‡ä»¶ä¸º Claude Code (claude.ai/code) åœ¨æ­¤ä»£ç ä»“åº“ä¸­å·¥ä½œæ—¶æä¾›æŒ‡å¯¼ã€‚

## å¼€å‘å‘½ä»¤

### æ ¸å¿ƒå¼€å‘å‘½ä»¤
- `npm run dev:frontend` - å¯åŠ¨ Nuxt å‰ç«¯å¼€å‘æœåŠ¡å™¨ (localhost:3000)
- `npm run dev:backend` - ä½¿ç”¨ Wrangler å¯åŠ¨ Hono åç«¯å¼€å‘æœåŠ¡å™¨
- `npm run build:all` - åŒæ—¶æ„å»ºå‰ç«¯å’Œåç«¯
- `npm run deploy:all` - æ„å»ºå¹¶éƒ¨ç½²ä¸¤ä¸ªæœåŠ¡åˆ° Cloudflareï¼ˆå…ˆéƒ¨ç½²åç«¯ï¼Œå†éƒ¨ç½²å‰ç«¯ï¼‰

### å•ç‹¬åŒ…å‘½ä»¤
- `npm run build:frontend` / `npm run build:backend` - æ„å»ºå•ç‹¬çš„åŒ…
- `npm run deploy:frontend` / `npm run deploy:backend` - éƒ¨ç½²å•ç‹¬çš„åŒ…
- `npm run type-check` - å¯¹ä¸¤ä¸ªåŒ…è¿›è¡Œ TypeScript éªŒè¯

### ä»£ç è´¨é‡
- `npm run lint` - å¯¹æ‰€æœ‰ TypeScript/Vue æ–‡ä»¶è¿è¡Œ ESLint
- `npm run lint:fix` - è‡ªåŠ¨ä¿®å¤ ESLint é—®é¢˜
- `npm run format` - ä½¿ç”¨ Prettier æ ¼å¼åŒ–ä»£ç 
- `npm run format:check` - æ£€æŸ¥æ ¼å¼åŒ–è€Œä¸è¿›è¡Œä¿®æ”¹

## æ¶æ„æ¦‚è§ˆ

è¿™æ˜¯ä¸€ä¸ªåŒ…å« Cloudflare å…¨æ ˆåº”ç”¨çš„ **monorepo**ï¼Œå…·æœ‰å…±äº«çš„ TypeScript ç±»å‹ã€‚

### é¡¹ç›®ç»“æ„
```
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ frontend/          # Nuxt 4 + Tailwind CSS å‰ç«¯
â”‚   â””â”€â”€ backend/           # ç”¨äº Cloudflare Workers çš„ Hono åç«¯
â””â”€â”€ shared/                # å…±äº«çš„ TypeScript ç±»å‹å’Œå¸¸é‡
```

### æŠ€æœ¯æ ˆ
- **å‰ç«¯**: Nuxt 4, Vue 3, Tailwind CSSï¼Œéƒ¨ç½²åˆ° Cloudflare Pages
- **åç«¯**: Hono æ¡†æ¶, TypeScriptï¼Œéƒ¨ç½²åˆ° Cloudflare Workers
- **å…±äº«**: å‰åç«¯å…±äº«çš„ TypeScript ç±»å‹å’Œ API å¸¸é‡

### å…³é”®æ¶æ„å†³ç­–

#### åç«¯ (Hono + Cloudflare Workers)
- **æœåŠ¡åˆ†å±‚æ¶æ„**: è·¯ç”±å±‚(Routes) â†’ æœåŠ¡å±‚(Services) â†’ å­˜å‚¨å±‚(KV)
- **æ™ºèƒ½è·¯ç”±ä»£ç†**: è‡ªåŠ¨è·¯ç”±è¯·æ±‚åˆ°å®˜æ–¹ Claude API æˆ–ç¬¬ä¸‰æ–¹ LLM ä¾›åº”å•†
- **æ ¼å¼è½¬æ¢æœºåˆ¶**: å†…ç½® Claude-OpenAI æ ¼å¼åŒå‘è½¬æ¢å™¨ï¼Œæ”¯æŒæ‰©å±•
- **ä¾›åº”å•†ç®¡ç†**: åŠ¨æ€é…ç½®å’Œç®¡ç†å¤šä¸ª LLM ä¾›åº”å•†
- **ç»Ÿä¸€é”™è¯¯å¤„ç†**: å…¨å±€å¼‚å¸¸æ•è·å’Œæ ‡å‡†åŒ–é”™è¯¯å“åº”
- **å¼€æ”¾ CORS é…ç½®**: æ”¯æŒæ‰€æœ‰æ¥æºè®¿é—®ï¼Œé€‚é… Claude Code å®¢æˆ·ç«¯
- **TypeScript ç±»å‹å®‰å…¨**: ä¸¥æ ¼ç±»å‹æ£€æŸ¥å’Œå…±äº«ç±»å‹å®šä¹‰

#### å‰ç«¯ (Nuxt 4 + Cloudflare Pages)
- é’ˆå¯¹ Cloudflare Pages é…ç½®ï¼Œå…·æœ‰ä¼˜åŒ–çš„æ„å»ºè®¾ç½®
- ä½¿ç”¨æ‰‹åŠ¨ä»£ç åˆ†å‰²ï¼ˆvendor chunksï¼‰ä»¥æå‡æ€§èƒ½
- é¦–é¡µåœ¨æ„å»ºæ—¶é¢„æ¸²æŸ“
- é€šè¿‡ `runtimeConfig` ç®¡ç†ç¯å¢ƒå˜é‡

#### å…±äº«ä»£ç ç­–ç•¥
- **ç±»å‹å®šä¹‰**: ç®¡ç†ç›¸å…³(`admin.ts`)ã€é€šç”¨ API(`api.ts`)ã€è®¤è¯(`auth.ts`)
- **å¸¸é‡é…ç½®**: ç®¡ç†ä¸­å¿ƒ(`admin.ts`)ã€API ç«¯ç‚¹(`endpoints.ts`)ã€é”™è¯¯ç (`errors.ts`)
- **å¯¼å…¥è·¯å¾„**: ä» packages ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¦‚ `../../../shared/types/admin`

### ç¯å¢ƒé…ç½®

#### åç«¯ç¯å¢ƒå˜é‡ (wrangler.toml)
- `NODE_ENV` - æ§åˆ¶é”™è¯¯è¯¦ç»†ç¨‹åº¦ (production/preview)
- `ADMIN_USERNAME` - ç®¡ç†ä¸­å¿ƒç™»å½•ç”¨æˆ·å (é»˜è®¤: admin)
- `ADMIN_PASSWORD` - ç®¡ç†ä¸­å¿ƒç™»å½•å¯†ç  (é»˜è®¤: password123)
- `CLAUDE_RELAY_ADMIN_KV` - KV Namespace ç»‘å®šï¼Œå­˜å‚¨ç®¡ç†æ•°æ®å’Œä¾›åº”å•†é…ç½®

#### å‰ç«¯ç¯å¢ƒå˜é‡
- `NUXT_PUBLIC_API_BASE_URL` - åç«¯ API åŸºç¡€ URL
- `NUXT_PUBLIC_APP_NAME` / `NUXT_PUBLIC_APP_VERSION` - åº”ç”¨å…ƒæ•°æ®

### éƒ¨ç½²æµç¨‹
1. **åç«¯å…ˆéƒ¨ç½²** (`npm run deploy:backend`) - ç¡®ä¿ API å¯ç”¨
2. **å‰ç«¯åéƒ¨ç½²** (`npm run deploy:frontend`) - è¿æ¥åˆ°çº¿ä¸Š API
3. **å®Œæ•´éƒ¨ç½²** (`npm run deploy:all`) - å¤„ç†æ•´ä¸ªåºåˆ—

### å¼€å‘å·¥ä½œæµç¨‹
- å‰ç«¯é»˜è®¤è¿æ¥åˆ°å·²éƒ¨ç½²çš„åç«¯ï¼ˆè€Œéæœ¬åœ°åç«¯ï¼‰
- ä¸¤ä¸ªåŒ…éƒ½ä½¿ç”¨åŸºäº workspace çš„ npm è„šæœ¬ä»¥ä¿æŒä¸€è‡´æ€§
- å…±äº«ç±»å‹ç¡®ä¿å‰åç«¯ API å¥‘çº¦ä¸€è‡´æ€§
- æ‰€æœ‰åŒ…éƒ½å¯ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼
- åç«¯ä½œä¸º Claude Code è¯·æ±‚è½¬å‘ä»£ç†ï¼Œæ”¯æŒæ¥è‡ªä»»æ„å®¢æˆ·ç«¯çš„è®¿é—®

## åç«¯ API æ¶æ„

### æ ¸å¿ƒ API ç«¯ç‚¹

#### Claude API ä»£ç† (`/v1/*`)
- `POST /v1/messages` - ä»£ç† Claude API æ¶ˆæ¯è¯·æ±‚ï¼Œæ™ºèƒ½è·¯ç”±åˆ°å®˜æ–¹ Claude æˆ–ç¬¬ä¸‰æ–¹ä¾›åº”å•†
- `GET /v1/health` - Claude API ä»£ç†æœåŠ¡å¥åº·æ£€æŸ¥

#### ç®¡ç†ä¸­å¿ƒ API (`/api/admin/*`)
- `POST /api/admin/auth` - ç®¡ç†å‘˜è®¤è¯ç™»å½•
- `GET /api/admin/dashboard` - è·å–ä»ªè¡¨æ¿æ•°æ®ï¼ˆä¾›åº”å•†ç»Ÿè®¡ã€ç³»ç»ŸçŠ¶æ€ç­‰ï¼‰
- `GET /api/admin/providers` - è·å–æ‰€æœ‰æ¨¡å‹ä¾›åº”å•†
- `POST /api/admin/providers` - æ·»åŠ æ–°çš„æ¨¡å‹ä¾›åº”å•†
- `DELETE /api/admin/providers/:id` - åˆ é™¤æ¨¡å‹ä¾›åº”å•†
- `GET /api/admin/models` - è·å–å¯ç”¨æ¨¡å‹åˆ—è¡¨
- `POST /api/admin/select-model` - é€‰æ‹©é»˜è®¤ä½¿ç”¨çš„æ¨¡å‹

#### ç³»ç»Ÿç«¯ç‚¹
- `GET /health` - åº”ç”¨å¥åº·æ£€æŸ¥å’ŒçŠ¶æ€ä¿¡æ¯

### æœåŠ¡å±‚æ¶æ„

#### ClaudeProxyService (æ™ºèƒ½ä»£ç†æœåŠ¡) 
- **èŒè´£**: æ™ºèƒ½è·¯ç”±è¯·æ±‚åˆ°å®˜æ–¹ Claude API æˆ–ç¬¬ä¸‰æ–¹ä¾›åº”å•†ã€æ™ºèƒ½é”™è¯¯å¤„ç†
- **æ ¸å¿ƒæ–¹æ³•**:
  - `proxyRequest(request)` - æ ¹æ®é€‰ä¸­çš„æ¨¡å‹æ™ºèƒ½è·¯ç”±è¯·æ±‚
  - `proxyToOfficialClaude(request)` - ä»£ç†åˆ°å®˜æ–¹ Claude API
  - `proxyToThirdParty(request, provider)` - ä»£ç†åˆ°ç¬¬ä¸‰æ–¹ä¾›åº”å•†
- **ç‰¹æ€§**: è‡ªåŠ¨æ¨¡å‹é€‰æ‹©ã€æ™ºèƒ½è·¯ç”±ã€ç»Ÿä¸€é”™è¯¯å¤„ç†ã€æµå¼å“åº”æ”¯æŒ

#### LLMProxyService (LLM ä»£ç†æœåŠ¡)
- **èŒè´£**: å¤„ç†ç¬¬ä¸‰æ–¹ LLM ä¾›åº”å•†çš„è¯·æ±‚è½¬å‘å’Œæ ¼å¼è½¬æ¢
- **æ ¸å¿ƒæ–¹æ³•**:
  - `handleRequest(claudeRequest, providerName)` - å¤„ç†å¹¶è½¬å‘è¯·æ±‚åˆ°æŒ‡å®šä¾›åº”å•†
  - `registerProviderFromConfig(provider)` - ä»é…ç½®åŠ¨æ€æ³¨å†Œä¾›åº”å•†
  - `getTransformerForProvider(provider)` - ä¸ºä¾›åº”å•†é€‰æ‹©åˆé€‚çš„è½¬æ¢å™¨
- **ç‰¹æ€§**: åŠ¨æ€ä¾›åº”å•†æ³¨å†Œã€è‡ªåŠ¨æ ¼å¼è½¬æ¢ã€æ”¯æŒå¤šç§è½¬æ¢å™¨

#### ClaudeToOpenAITransformer (æ ¼å¼è½¬æ¢å™¨)
- **èŒè´£**: åœ¨ Claude API æ ¼å¼å’Œ OpenAI API æ ¼å¼ä¹‹é—´è¿›è¡ŒåŒå‘è½¬æ¢
- **æ ¸å¿ƒæ–¹æ³•**:
  - `transformRequestOut(request)` - å°† Claude è¯·æ±‚è½¬æ¢ä¸º OpenAI æ ¼å¼
  - `transformResponseIn(response)` - å°† OpenAI å“åº”è½¬æ¢ä¸º Claude æ ¼å¼
  - `convertStreamToClaudeFormat(stream)` - è½¬æ¢æµå¼å“åº”æ ¼å¼
- **ç‰¹æ€§**: å®Œæ•´çš„æ¶ˆæ¯æ ¼å¼è½¬æ¢ã€å·¥å…·è°ƒç”¨æ”¯æŒã€æµå¼å“åº”å¤„ç†

#### AdminService (ç®¡ç†æœåŠ¡)
- **èŒè´£**: ç®¡ç†ä¸­å¿ƒåŠŸèƒ½å®ç°ã€æ¨¡å‹ä¾›åº”å•†ç®¡ç†ã€ç³»ç»Ÿé…ç½®
- **æ ¸å¿ƒæ–¹æ³•**:
  - `verifyAdmin(username, password)` - éªŒè¯ç®¡ç†å‘˜å‡­æ®
  - `getDashboardData()` - è·å–ä»ªè¡¨æ¿ç»Ÿè®¡æ•°æ®
  - `getProviders()` / `addProvider()` / `deleteProvider()` - ä¾›åº”å•†ç®¡ç†
  - `getAvailableModels()` / `selectModel()` - æ¨¡å‹é€‰æ‹©å’Œåˆ‡æ¢

### æ•°æ®å­˜å‚¨è®¾è®¡

#### KV å­˜å‚¨ç»“æ„
```typescript
// OAuth Token å­˜å‚¨
'claude_token': {
  access_token: string,
  refresh_token: string,
  expires_at: number,
  scope: string,
  // ... å…¶ä»– token ä¿¡æ¯
}

// ç®¡ç†ä¸­å¿ƒæ•°æ®å­˜å‚¨
'admin_model_providers': ModelProvider[]  // æ¨¡å‹ä¾›åº”å•†åˆ—è¡¨
'admin_selected_model': SelectedModel     // å½“å‰é€‰ä¸­çš„æ¨¡å‹
'admin_provider_{{id}}': {               // å„ä¾›åº”å•†çš„è¯¦ç»†é…ç½®
  apiKey: string,
  endpoint: string,
  model: string,
  transformer: string
}
```

### é”™è¯¯å¤„ç†æœºåˆ¶

#### è‡ªå®šä¹‰é”™è¯¯ç±»å‹
- `AuthError` - OAuth è®¤è¯ç›¸å…³é”™è¯¯
- `TokenExpiredError` - Token è¿‡æœŸé”™è¯¯  
- `ClaudeApiError` - Claude API è°ƒç”¨é”™è¯¯
- `ValidationError` - è¯·æ±‚å‚æ•°éªŒè¯é”™è¯¯

#### ç»Ÿä¸€é”™è¯¯å“åº”æ ¼å¼
```typescript
{
  success: false,
  error: {
    type: 'ERROR_TYPE',
    message: 'Human readable message'
  },
  timestamp: string
}
```

### æ™ºèƒ½è·¯ç”±æœºåˆ¶

#### è¯·æ±‚è·¯ç”±æµç¨‹
1. æ¥æ”¶ Claude API æ ¼å¼çš„è¯·æ±‚
2. æ£€æŸ¥å½“å‰é€‰ä¸­çš„æ¨¡å‹é…ç½®
3. å¦‚æœæ˜¯å®˜æ–¹ Claude æ¨¡å‹ï¼Œç›´æ¥è½¬å‘åˆ° Claude API
4. å¦‚æœæ˜¯ç¬¬ä¸‰æ–¹æ¨¡å‹ï¼š
   - ä½¿ç”¨å¯¹åº”çš„è½¬æ¢å™¨è½¬æ¢è¯·æ±‚æ ¼å¼
   - è½¬å‘åˆ°ç¬¬ä¸‰æ–¹ä¾›åº”å•† API
   - å°†å“åº”è½¬æ¢å› Claude æ ¼å¼
5. è¿”å›ç»Ÿä¸€çš„ Claude API æ ¼å¼å“åº”

#### æ”¯æŒçš„è½¬æ¢å™¨
- `claude-to-openai` - Claude æ ¼å¼ä¸ OpenAI æ ¼å¼åŒå‘è½¬æ¢
- å¯é€šè¿‡ `LLMProxyService.addTransformer()` æ·»åŠ è‡ªå®šä¹‰è½¬æ¢å™¨

### éœ€è¦ç†è§£çš„å…³é”®æ–‡ä»¶

#### åç«¯æ ¸å¿ƒæ–‡ä»¶
- `packages/backend/src/index.ts` - Hono åº”ç”¨å…¥å£ï¼Œä¸­é—´ä»¶å’Œè·¯ç”±é…ç½®
- `packages/backend/src/routes/claude.ts` - Claude API ä»£ç†è·¯ç”±
- `packages/backend/src/routes/admin.ts` - ç®¡ç†ä¸­å¿ƒ API è·¯ç”±
- `packages/backend/src/services/claude.ts` - æ™ºèƒ½ä»£ç†æœåŠ¡å®ç°
- `packages/backend/src/services/llm-proxy.ts` - LLM ä»£ç†æœåŠ¡
- `packages/backend/src/services/claude-to-openai-transformer.ts` - æ ¼å¼è½¬æ¢å™¨
- `packages/backend/src/services/admin.ts` - ç®¡ç†æœåŠ¡å®ç°
- `packages/backend/src/types/env.ts` - ç¯å¢ƒå˜é‡å’Œç»‘å®šç±»å‹å®šä¹‰
- `packages/backend/src/types/transformer.ts` - è½¬æ¢å™¨ç±»å‹å®šä¹‰

#### å…±äº«ç±»å‹å’Œå¸¸é‡
- `shared/types/admin.ts` - ç®¡ç†ä¸­å¿ƒç±»å‹å®šä¹‰
- `shared/types/api.ts` - é€šç”¨ API ç±»å‹
- `shared/types/auth.ts` - è®¤è¯ç›¸å…³ç±»å‹
- `shared/constants/admin.ts` - ç®¡ç†ä¸­å¿ƒå¸¸é‡
- `shared/constants/endpoints.ts` - API ç«¯ç‚¹å¸¸é‡
- `shared/constants/errors.ts` - é”™è¯¯ç å®šä¹‰

#### é…ç½®æ–‡ä»¶
- `packages/backend/wrangler.toml` - Cloudflare Workers éƒ¨ç½²é…ç½®
- `æ ¹ç›®å½•/package.json` - Workspace é…ç½®å’Œç»Ÿä¸€è„šæœ¬

### å¼€å‘æœ€ä½³å®è·µ

#### ä»£ç ç»„ç»‡åŸåˆ™
- **åˆ†å±‚æ¶æ„**: ä¸¥æ ¼çš„è·¯ç”±â†’æœåŠ¡â†’å­˜å‚¨åˆ†å±‚
- **ç±»å‹å®‰å…¨**: å…¨é“¾è·¯ TypeScript ç±»å‹çº¦æŸ
- **é”™è¯¯ä¼˜å…ˆ**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·å‹å¥½æç¤º
- **æ— çŠ¶æ€è®¾è®¡**: åˆ©ç”¨ KV å­˜å‚¨å®ç°çŠ¶æ€æŒä¹…åŒ–

#### æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
- **å“åº”æµ**: ç›´æ¥è½¬å‘æµå¼å“åº”ï¼Œæ”¯æŒ Claude å’Œ OpenAI æ ¼å¼
- **åŠ¨æ€è·¯ç”±**: æ ¹æ®é€‰ä¸­æ¨¡å‹æ™ºèƒ½è·¯ç”±ï¼Œé¿å…ä¸å¿…è¦çš„è½¬æ¢
- **å¹¶å‘æ§åˆ¶**: å¼‚æ­¥å¤„ç†å’Œé€‚å½“çš„è¶…æ—¶æ§åˆ¶
- **è½¬æ¢ä¼˜åŒ–**: æµå¼è½¬æ¢ï¼Œé¿å…å…¨é‡ç¼“å­˜å“åº”æ•°æ®

ä»£ç åº“è®¾è®¡é‡ç‚¹å…³æ³¨ç®€æ´æ€§ã€ç±»å‹å®‰å…¨å’Œ Cloudflare å¹³å°æ·±åº¦é›†æˆï¼Œä¸º Claude Code æä¾›æ™ºèƒ½çš„å¤šæ¨¡å‹ä»£ç†æœåŠ¡ã€‚

## ç®¡ç†ä¸­å¿ƒåŠŸèƒ½

### åŠŸèƒ½æ¦‚è¿°

ç®¡ç†ä¸­å¿ƒæä¾›äº†ä¸€ä¸ªå®Œæ•´çš„ Web ç•Œé¢æ¥ç®¡ç†ç¬¬ä¸‰æ–¹æ¨¡å‹ä¾›åº”å•†é…ç½®å’Œæ¨¡å‹é€‰æ‹©ã€‚

#### æ ¸å¿ƒåŠŸèƒ½
- **ğŸ” ç®¡ç†å‘˜è®¤è¯**: åŸºäºç¯å¢ƒå˜é‡çš„ç®€å•è®¤è¯æœºåˆ¶
- **ğŸ“Š ç³»ç»Ÿä»ªè¡¨æ¿**: æ˜¾ç¤ºä¾›åº”å•†ç»Ÿè®¡ã€ç³»ç»ŸçŠ¶æ€ç­‰ä¿¡æ¯
- **ğŸ”§ æ¨¡å‹ä¾›åº”å•†ç®¡ç†**: æ·»åŠ ã€åˆ é™¤ç¬¬ä¸‰æ–¹ AI æ¨¡å‹ä¾›åº”å•†ï¼ˆé­”æ­ã€æ™ºè°± AIã€OpenAI å…¼å®¹æœåŠ¡ç­‰ï¼‰
- **ğŸ¯ æ¨¡å‹é€‰æ‹©**: åœ¨å®˜æ–¹ Claude å’Œç¬¬ä¸‰æ–¹æ¨¡å‹é—´åˆ‡æ¢é»˜è®¤ä½¿ç”¨çš„æ¨¡å‹
- **ğŸ”„ æ™ºèƒ½è·¯ç”±**: è‡ªåŠ¨å°†è¯·æ±‚è·¯ç”±åˆ°é€‰ä¸­çš„æ¨¡å‹ä¾›åº”å•†

#### é¢„è®¾ä¾›åº”å•†æ”¯æŒ
- **é­”æ­ Qwen**: é˜¿é‡Œäº‘é­”æ­ç¤¾åŒºçš„ Qwen ç³»åˆ—æ¨¡å‹
- **æ™ºè°± AI**: GLM-4 ç­‰å…ˆè¿›è¯­è¨€æ¨¡å‹  
- **OpenAI Compatible**: å…¼å®¹ OpenAI API çš„å…¶ä»–æœåŠ¡

### è®¿é—®æ–¹å¼

#### å¼€å‘ç¯å¢ƒ
- å‰ç«¯æœ¬åœ°å¼€å‘: `http://localhost:3000/admin`
- åç«¯æœ¬åœ°å¼€å‘: `http://localhost:8787` (Wrangler é»˜è®¤ç«¯å£)
- æœ¬åœ°å¼€å‘æ—¶ï¼Œå‰ç«¯è‡ªåŠ¨ä½¿ç”¨ `http://localhost:8787` ä½œä¸º API åŸºç¡€ URL

#### ç”Ÿäº§ç¯å¢ƒ
- ç®¡ç†ä¸­å¿ƒ: `https://claude-relay-frontend.pages.dev/admin`
- é»˜è®¤ç™»å½•å‡­æ®: `admin` / `password123`

### æ¨¡å‹ä¾›åº”å•†é…ç½®

#### æ·»åŠ ä¾›åº”å•†æµç¨‹
1. **é€‰æ‹©é¢„è®¾æ¨¡æ¿**: é€‰æ‹©é­”æ­ã€æ™ºè°± AI æˆ– OpenAI å…¼å®¹æ¨¡æ¿
2. **å¡«å†™é…ç½®ä¿¡æ¯**: 
   - ä¾›åº”å•†åç§°å’Œæè¿°
   - API ç«¯ç‚¹ URL
   - API å¯†é’¥
   - æ¨¡å‹åç§°
   - è½¬æ¢å™¨ç±»å‹ï¼ˆé€šå¸¸ä¸º claude-to-openaiï¼‰
3. **ä¿å­˜é…ç½®**: ä¾›åº”å•†é…ç½®ä¿å­˜åˆ° KV å­˜å‚¨
4. **é€‰æ‹©ä½¿ç”¨**: åœ¨æ¨¡å‹é€‰æ‹©é¡µé¢åˆ‡æ¢åˆ°æ–°æ·»åŠ çš„ä¾›åº”å•†

#### æ™ºèƒ½è·¯ç”±å·¥ä½œæµç¨‹
1. Claude Code å‘é€è¯·æ±‚åˆ° `/v1/messages`
2. ç³»ç»Ÿæ£€æŸ¥å½“å‰é€‰ä¸­çš„æ¨¡å‹
3. å¦‚æœæ˜¯ç¬¬ä¸‰æ–¹æ¨¡å‹ï¼Œä½¿ç”¨ LLMProxyService å¤„ç†ï¼š
   - è½¬æ¢è¯·æ±‚æ ¼å¼
   - è½¬å‘åˆ°ä¾›åº”å•† API
   - è½¬æ¢å“åº”æ ¼å¼
4. è¿”å›æ ‡å‡† Claude API æ ¼å¼å“åº”

### é¡µé¢ç»“æ„

```
/                         # é¦–é¡µï¼ˆè‡ªåŠ¨é‡å®šå‘åˆ°ç®¡ç†ä¸­å¿ƒï¼‰
/admin                    # ç™»å½•é¡µé¢
â”œâ”€â”€ /admin/dashboard      # ä¸»ä»ªè¡¨æ¿
â”‚   â”œâ”€â”€ æ¨¡å‹ä¾›åº”å•†æ ‡ç­¾é¡µ    # ç®¡ç†ç¬¬ä¸‰æ–¹AIæ¨¡å‹ä¾›åº”å•†ï¼ˆé»˜è®¤é¡µé¢ï¼‰
â”‚   â””â”€â”€ æ¨¡å‹é€‰æ‹©æ ‡ç­¾é¡µ      # é€‰æ‹©é»˜è®¤ä½¿ç”¨çš„æ¨¡å‹
â””â”€â”€ /admin/add-provider   # æ·»åŠ ä¾›åº”å•†é¡µé¢
```

### æ–‡ä»¶ç»„ç»‡

#### å‰ç«¯æ–‡ä»¶
```
packages/frontend/pages/admin/
â”œâ”€â”€ index.vue           # ç™»å½•é¡µé¢
â”œâ”€â”€ dashboard.vue       # ä¸»ä»ªè¡¨æ¿  
â””â”€â”€ add-provider.vue    # æ·»åŠ ä¾›åº”å•†é¡µé¢
```

#### åç«¯æ–‡ä»¶
```
packages/backend/src/
â”œâ”€â”€ routes/admin.ts     # ç®¡ç† API è·¯ç”±
â””â”€â”€ services/admin.ts   # ç®¡ç†æœåŠ¡å®ç°
```

#### å…±äº«ç±»å‹
```
shared/
â”œâ”€â”€ types/admin.ts      # ç®¡ç†ä¸­å¿ƒç±»å‹å®šä¹‰
â””â”€â”€ constants/admin.ts  # ç®¡ç†ä¸­å¿ƒå¸¸é‡é…ç½®
```

### éƒ¨ç½²æ³¨æ„äº‹é¡¹

1. **ç¯å¢ƒå˜é‡é…ç½®**: ç¡®ä¿åœ¨ `wrangler.toml` ä¸­æ­£ç¡®è®¾ç½® `ADMIN_USERNAME` å’Œ `ADMIN_PASSWORD`
2. **å®‰å…¨è€ƒè™‘**: ç”Ÿäº§ç¯å¢ƒä¸­åº”ä¿®æ”¹é»˜è®¤å¯†ç 
3. **KV å­˜å‚¨**: ç®¡ç†ä¸­å¿ƒæ•°æ®å­˜å‚¨åœ¨ `CLAUDE_RELAY_ADMIN_KV` namespace ä¸­

### å¼€å‘å»ºè®®

- ç®¡ç†ä¸­å¿ƒé‡‡ç”¨ç®€åŒ–è®¾è®¡ï¼Œä¸“æ³¨æ ¸å¿ƒåŠŸèƒ½
- è®¤è¯æœºåˆ¶ç®€å•ä½†å®‰å…¨ï¼ŒåŸºäºç¯å¢ƒå˜é‡éªŒè¯
- UI è®¾è®¡å¤ç”¨åŸå‹ï¼Œä¿æŒä¸é¡¹ç›®æ•´ä½“é£æ ¼ä¸€è‡´
- API è®¾è®¡éµå¾ªç°æœ‰æ¨¡å¼ï¼Œç¡®ä¿ç±»å‹å®‰å…¨
- æ”¯æŒå¤šç§ LLM ä¾›åº”å•†ï¼Œæä¾›ç»Ÿä¸€çš„ Claude API æ¥å£
- æ™ºèƒ½è·¯ç”±æœºåˆ¶ç¡®ä¿è¯·æ±‚æ­£ç¡®è½¬å‘åˆ°å¯¹åº”çš„æ¨¡å‹ä¾›åº”å•†